# キャンパス時報システム 要件定義書 (Requirements Definition Document)

**プロジェクト名:** Campus Evening Chime System  
**バージョン:** 1.0.0  
**対象ハードウェア:** Raspberry Pi 3 Model B

---

## 1. プロジェクト概要
大学施設において、平日定刻（17:00）に「蛍の光」を自動再生し、帰宅を促す環境音響システムを構築する。既存の天候通知ボットとの音声デバイス競合を解決し、公共空間に相応しい音響演出（フェードイン）を行う。

## 2. システム構成範囲

### 2.1 ハードウェア構成
- **ホスト:** Raspberry Pi 3 Model B
- **OS:** Raspberry Pi OS (Lite/Headless推奨)
- **オーディオ出力:** USBスピーカー または 3.5mmジャック接続スピーカー
- **ネットワーク:** 学内Wi-Fi (NTP同期必須)

### 2.2 ソフトウェア環境
- **言語:** Python 3.9以上
- **プロセス管理:** systemd (Linux標準)
- **バージョン管理:** Git / GitHub

## 3. 機能要件 (Functional Requirements)

### 3.1 時報再生機能
- **トリガー:** 平日 17:00:00 (JST)
- **対象音源:** `auld_lang_syne.mp3` (Auld Lang Syne)
- **音響処理:** 再生開始時に 2000ms (2秒) かけて音量を0%から100%へ滑らかに上げる（フェードイン）。
- **二重再生防止:** 同一日付内で1回のみ再生するロジックを実装すること。

### 3.3 環境自動判定機能 (Cross-Platform)
- **要件:** 実行環境が「開発環境 (Windows/WSL)」か「本番環境 (Raspberry Pi/Linux)」かを自動判定すること。
- **挙動:**
    - **本番環境 (Linux):** 実際にオーディオドライバを読み込み、音を出力し、競合プロセスをキルする。
    - **開発環境 (WSL):** 音声出力およびプロセスキルを行わず、標準出力へのログ表示のみを行う（Mockモード）。

## 4. 非機能要件 (Non-Functional Requirements)

### 4.1 可用性・信頼性
- **自動復旧:** 電源断やOS再起動後、自動的にサービスが立ち上がること (systemd)。
- **CPU負荷:** Raspberry Pi 3Bのリソースを圧迫しないよう、監視ループには適切なスリープ (`time.sleep`) を挿入し、CPU使用率を1%未満に抑えること。

### 4.2 法的コンプライアンス
- **著作権:** 使用する音源はパブリックドメイン（著作権保護期間満了）またはクリエイティブ・コモンズ（商用利用可）のものを使用し、他者の権利を侵害しないこと。

## 5. 制約事項
- **GUI:** ヘッドレス運用（モニターなし）を前提とし、GUIライブラリへの依存を避ける。
- **デプロイ:** GitHub経由でのデプロイを前提としたファイル構成にすること。

